(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{257:function(t,s,a){"use strict";a.r(s);var n={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=a(5),o=Object(e.a)(n,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[a("h1",{attrs:{id:"wxa-redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wxa-redux","aria-hidden":"true"}},[t._v("#")]),t._v(" @wxa/redux")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/@wxa/redux",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://img.shields.io/npm/v/@wxa/redux/next.svg",alt:"NPM version"}}),a("OutboundLink")],1),t._v(" "),a("img",{attrs:{src:"https://img.shields.io/bundlephobia/minzip/@wxa/redux/next.svg",alt:"npm bundle size (minified + gzip)"}})]),t._v(" "),a("p",[t._v("reduxå°ç¨‹åºé€‚é…æ–¹æ¡ˆï¼Œåœ¨å°ç¨‹åºå¼€å‘ä¸­ä½¿ç”¨reduxç®¡ç†å…¨å±€çŠ¶æ€ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…","aria-hidden":"true"}},[t._v("#")]),t._v(" å®‰è£…")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# ä½¿ç”¨npmå®‰è£…")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -S @wxa/redux\n")])])]),a("h2",{attrs:{id:"ç”¨ä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨ä¾‹","aria-hidden":"true"}},[t._v("#")]),t._v(" ç”¨ä¾‹")]),t._v(" "),a("ol",[a("li",[t._v("åœ¨"),a("code",[t._v("app.js")]),t._v("/"),a("code",[t._v("app.wxa")]),t._v("ä¸­æŒ‚è½½æ’ä»¶ã€‚")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// app.js or app.wxa")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("App"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wxa"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'@wxa/core'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("wxaRedux"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" combineReducers"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'@wxa/redux'")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" promiseMiddleware "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'redux-promise'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nwxa"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("use")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wxaRedux"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    reducers"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("combineReducers")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("your reducer"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    middlewares"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("promiseMiddleware"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n@App\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Main")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("æŒ‚è½½æˆåŠŸåï¼Œæ’ä»¶ä¼šåœ¨Appã€Componentã€Pageå®ä¾‹ä¸­æŒ‚è½½storeåˆ°"),a("code",[t._v("$store")]),t._v("ã€‚é€šè¿‡"),a("code",[t._v("$store.getState()")]),t._v("å¯ä»¥è·å¾—æ‰€æœ‰å…¨å±€çŠ¶æ€ã€‚")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("åœ¨é¡µé¢/ç»„ä»¶ç±»ä¸­å®šä¹‰"),a("code",[t._v("mapState")]),t._v("å¯¹è±¡ï¼ŒæŒ‡å®šå…³è”çš„å…¨å±€çŠ¶æ€ï¼ˆåœ¨"),a("code",[t._v("react")]),t._v("ä¸­å«"),a("code",[t._v("connect")]),t._v("ï¼‰ã€‚")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Page"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'@wxa/core'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@Page\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Index")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mapState "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        todolist "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("todo"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        userInfo "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token function"}},[t._v("add")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// dispatch change state.")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// todo list will auto add one.")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'Add_todo_list'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'coding today'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ç„¶åå†"),a("code",[t._v("template")]),t._v("ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ˜ å°„çš„æ•°æ®äº†ã€‚")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{userInfo.name}}"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[a("span",{attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("for")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{todolist}}"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{key+1}}{{item}}"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("å¾—ç›Šäº"),a("code",[t._v("@wxa/core")]),t._v("çš„diffæ–¹æ³•ï¼Œreduxåœ¨åŒæ­¥æ•°æ®çš„æ—¶å€™åªä¼šå¢é‡çš„ä¿®æ”¹æ•°æ®ï¼Œè€Œä¸æ˜¯å…¨é‡è¦†ç›–ã€‚ğŸ˜")]),t._v(" "),a("h2",{attrs:{id:"æŠ€æœ¯ç»†èŠ‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æŠ€æœ¯ç»†èŠ‚","aria-hidden":"true"}},[t._v("#")]),t._v(" æŠ€æœ¯ç»†èŠ‚")]),t._v(" "),a("p",[a("code",[t._v("wxa/redux")]),t._v("æ ¹æ®ä¸åŒçš„å®ä¾‹ç±»å‹æœ‰ä¸åŒçš„ä»»åŠ¡ï¼Œåœ¨Appå±‚ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("store")]),t._v("å¹¶æŒ‚è½½åˆ°appä¸­ï¼Œåœ¨"),a("code",[t._v("Page")]),t._v("å’Œ"),a("code",[t._v("Component")]),t._v("å±‚ï¼Œæˆ‘ä»¬åšäº†æ›´å¤šç»†èŠ‚å¤„ç†ã€‚")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("App Level")]),a("br"),t._v("\nåˆ›å»º"),a("code",[t._v("store")]),t._v("ï¼Œåº”ç”¨reduxçš„ä¸­é—´ä»¶ï¼ŒæŒ‚è½½"),a("code",[t._v("store")]),t._v("åˆ°Appå®ä¾‹ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Page Level")]),a("br"),t._v("\nåœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæœ‰ä¸åŒçš„å¤„ç†ã€‚")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("onLoad")]),t._v(" æ ¹æ®"),a("code",[t._v("mapState")]),t._v("è®¢é˜…"),a("code",[t._v("store")]),t._v("çš„æ•°æ®ï¼ŒåŒæ—¶æŒ‚è½½ä¸€ä¸ª"),a("code",[t._v("unsubscribe")]),t._v("æ–¹æ³•åˆ°å®ä¾‹ã€‚")]),t._v(" "),a("li",[a("code",[t._v("onShow")]),t._v(" æ ‡è®°é¡µé¢å®ä¾‹"),a("code",[t._v("$$isCurrentPage")]),t._v("ä¸º"),a("code",[t._v("true")]),t._v(", åŒæ—¶åšä¸€æ¬¡çŠ¶æ€åŒæ­¥ã€‚å› ä¸ºæœ‰å¯èƒ½çŠ¶æ€åœ¨å…¶ä»–é¡µé¢åšäº†æ”¹å˜ã€‚")]),t._v(" "),a("li",[a("code",[t._v("onHide")]),t._v(" é‡ç½®"),a("code",[t._v("$$isCurrentPage")]),t._v("ï¼Œè¿™æ ·å­é¡µé¢æ•°æ®å°±ä¸ä¼šè‡ªåŠ¨åˆ·æ–°äº†ã€‚")]),t._v(" "),a("li",[a("code",[t._v("onUnload")]),t._v(" è°ƒç”¨"),a("code",[t._v("$unsubscribe")]),t._v("å–æ¶ˆè®¢é˜…çŠ¶æ€")])])])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("strong",[t._v("Component Level")]),a("br"),t._v("\né’ˆå¯¹ç»„ä»¶ç”Ÿå‘½å‘¨æœŸåšä¸€äº›å•ç‹¬å¤„ç†\n"),a("ul",[a("li",[a("code",[t._v("created")]),t._v(" æŒ‚è½½"),a("code",[t._v("store")])]),t._v(" "),a("li",[a("code",[t._v("attached")]),t._v(" è®¢é˜…çŠ¶æ€ï¼Œå¹¶åŒæ­¥çŠ¶æ€åˆ°ç»„ä»¶ã€‚")]),t._v(" "),a("li",[a("code",[t._v("detached")]),t._v(" å–æ¶ˆè®¢é˜…")])])])])])},[],!1,null,null,null);o.options.__file="redux.md";s.default=o.exports}}]);